(function(e){"use strict";function t(){return"swiftSet v0.9.14 MIT License Â© 2014 James Abney http://github.com/jabney/swiftSet"}function i(e,t){this.item=e;this.toString=t?t:function(){return"("+e+":"+r(e)+")"}}function s(e){return function(t){return new i(t,e)}}function o(e){return e instanceof i}function u(e,t){var r=new a(e,t),i=r.items();this.process=function(e,n){var r=e instanceof u?e.items():e,s=[],o=new a(i,t),e=(new a(r,t)).normalize(2);o.merge(e);if(n){o.each(function(e,t){n(t)&&s.push(e)});return s}else{return o}};this.each=function(e,t){return r.each(function(t){return e.call(this,t)},t)};this.items=function(){return r.items()};this.unwrap=function(){return r.unwrap()};this.keyify=function(){var e=[],t;r.each(function(t,n,r){e.push(r+",")});return"{"+e.sort().join("").slice(0,-1)+"}"};this.toString=function(){return this.keyify()};this.add=function(){r.addItems(n.call(arguments,0));i=r.items();return this};this.remove=function(){r.removeItems(n.call(arguments,0));i=r.items();return this};this.addItems=function(e){r.addItems(e);i=r.items();return this};this.removeItems=function(e){r.removeItems(e);i=r.items();return this};this.copy=function(e){return e?new u(e,t):new u(i,t)};this.size=function(){return r.size()};this.has=function(e){return r.has(e)};this.clear=function(e){r.clear(e);i=[];return this}}function a(e,t){function o(e,t){var o=s(e),t=typeof t==="undefined"?1:t;if(n[o]){n[o].freq+=t}else{n[o]={item:e,freq:t};r++}i=Math.max(i,n[o].freq);return this}function u(e){var t=s(e);if(n[t]){delete n[t];r--}return this}var n=Object.create(null),r=0,i=0,e=typeof e==="string"?e.split(""):e,s=function(){return typeof t==="undefined"?function(e){var t=e.hkey,n=typeof t;return n==="undefined"?e:n==="function"?t.call(e):t}:typeof t==="function"?function(e){return t.call(e)}:function(e){return e[t]}}();e&&e.forEach(function(e){o(e)});this.addItems=function(e){e.forEach(function(e){o(e)});return this};this.removeItems=function(e){e.forEach(function(e){u(e)});return this};this.copy=function(e){return e?new a(e,t):(new a(null,t)).merge(this)};this.normalize=function(e){var t,e=typeof e==="undefined"?1:e;for(t in n){n[t].freq=e}i=e;return this};this.each=function(e,t){for(var r in n){if(e.call(t,n[r].item,n[r].freq,r))break}return this};this.has=function(e){var t=s(e);return n[t]===undefined?false:true};this.size=function(){return r};this.max=function(){return i};this.freq=function(e){var t=s(e);return n[t]===undefined?0:n[t].freq};this.merge=function(e){e.each(function(e,t){o(e,t)});return this};this.clear=function(e){n=Object.create(null);r=0;i=0;e&&this.addItems(e);return this}}var n=Array.prototype.slice,r=function(){var e=Object.prototype.toString,t=function(){var e=/\[object (\w+)\]/;return function(t){return e.exec(Object.prototype.toString.call(t))[1]}}(),n=["Null","Undefined","Array","Boolean","Number","String","Object","Function","Date","Error","RegExp","Arguments","Math","JSON"],r=Object.create(null);n.forEach(function(e,t){r[e]=t});return function(n){var i=t(n);return r[i]||i}}();u.wrapObj=s;u.isWrapped=o;u.prototype={union:function(e){return this.process(e,function(e){return true})},intersection:function(e){return this.process(e,function(e){return e===3})},difference:function(e){return this.process(e,function(e){return e<3})},complement:function(e){return this.process(e,function(e){return e==1})},equals:function(e){var t=this.process(e);return t.min()===3&&t.max()===3},constructor:u};(function(){var e=[],t;e.push(t=function(){return this});u.pushUid=function(n){e.push(n);t=n;return n};u.popUid=function(){var n;e.length>1&&(n=e.pop());t=e[e.length-1];return n||null};u.process=function(e,n,r){var i=Object.create(null),s=[],o,u;e.forEach(function(e){o=t.call(e);if(!i[o]){i[o]={value:e,freq:1}}});n.forEach(function(e){o=t.call(e);if(i[o]){if(i[o].freq===1)i[o].freq=3}else{i[o]={value:e,freq:2}}});if(r){for(u in i){if(r(i[u].freq))s.push(i[u].value)}return s}else{return i}};u.union=function(e,t){return u.process(e,t,function(e){return true})};u.intersection=function(e,t){return u.process(e,t,function(e){return e===3})};u.difference=function(e,t){return u.process(e,t,function(e){return e<3})};u.complement=function(e,t){return u.process(e,t,function(e){return e===1})};u.equals=function(e,t){var n=0,r=Math.pow(2,53),i,s=u.process(e,t);for(var i in s){n=Math.max(n,s[i].freq);r=Math.min(r,s[i].freq)}return r===3&&n===3}})();e.Set=u;a.wrapObj=s;a.isWrapped=o;a.prototype={add:function(){this.addItems(n.call(arguments,0));return this},remove:function(){this.removeItems(n.call(arguments,0));return this},items:function(){return this.map(function(e){return e})},frequencies:function(){return this.map(function(e,t){return t})},keys:function(){return this.map(function(e,t,n){return n})},unwrap:function(){return this.map(function(e){return o(e)?e.item:e})},min:function(){return Math.min.apply(null,this.frequencies())},ge:function(e){var t=[];this.each(function(n,r){r>=e&&t.push(n)});return t},le:function(e){var t=[];this.each(function(n,r){r<=e&&t.push(n)});return t},eq:function(e){var t=[];this.each(function(n,r){r===e&&t.push(n)});return t},total:function(){return this.reduce(function(e,t){return e+t},0)},average:function(){return this.total()/this.size()},entropy:function(){var e=this.total();return this.reduce(function(t,n){var r=n/e;return t-r*Math.log2(r)},0)},bits:function(e){return this.total()*(e?Math.log2(e>1?e:this.size()):this.entropy())},equals:function(e){return this.keyify()===e.keyify()},map:function(e,t){var n=[];this.each(function(t,r,i){n.push(e.call(this,t,r,i))},t);return n},reduce:function(e,t){return this.frequencies().reduce(function(t,n){return e(t,n)},t)},keyify:function(){var e=[],t;this.each(function(t,n,r){e.push(r+":"+n+",")});return"{"+e.sort().join("").slice(0,-1)+"}"},toString:function(){return this.keyify()},constructor:a};e.Histogram=a})(window.swiftSet=window.swiftSet||{})